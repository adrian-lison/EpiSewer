<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Use stan's pathfinder variational inference algorithm — sampler_stan_pathfinder • EpiSewer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use stan's pathfinder variational inference algorithm — sampler_stan_pathfinder"><meta name="description" content="This option uses stan's pathfinder algorithm via cmdstanr::cmdstanr
for variational inference. Sampling is fast but yields potentially
inaccurate results with unreliable uncertainty information. Currently, this
sampler is recommended only for preview purposes, not for real-world
inference."><meta property="og:description" content="This option uses stan's pathfinder algorithm via cmdstanr::cmdstanr
for variational inference. Sampling is fast but yields potentially
inaccurate results with unreliable uncertainty information. Currently, this
sampler is recommended only for preview purposes, not for real-world
inference."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EpiSewer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introduction</h6></li>
    <li><a class="dropdown-item" href="../articles/model-specification.html">Modeling in EpiSewer</a></li>
    <li><a class="dropdown-item" href="../articles/detailed-example.html">Detailed example</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Modeling details</h6></li>
    <li><a class="dropdown-item" href="../articles/model-definition.html">Model definition</a></li>
    <li><a class="dropdown-item" href="../articles/load_per_case.html">The "shedding load per case" assumption</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/adrian-lison/EpiSewer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Use stan's pathfinder variational inference algorithm</h1>
      <small class="dont-index">Source: <a href="https://github.com/adrian-lison/EpiSewer/blob/v0.0.4/R/utils_stan.R" class="external-link"><code>R/utils_stan.R</code></a></small>
      <div class="d-none name"><code>sampler_stan_pathfinder.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This option uses stan's pathfinder algorithm via <a href="https://mc-stan.org/cmdstanr/reference/cmdstanr-package.html" class="external-link">cmdstanr::cmdstanr</a>
for variational inference. Sampling is fast but yields potentially
inaccurate results with unreliable uncertainty information. Currently, this
sampler is recommended only for preview purposes, not for real-world
inference.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sampler_stan_pathfinder</span><span class="op">(</span></span>
<span>  draws <span class="op">=</span> <span class="fl">4000</span>,</span>
<span>  num_paths <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  single_path_draws <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_lbfgs_iters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  num_elbo_draws <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  psis_resample <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  refresh <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  show_messages <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  show_exceptions <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-draws">draws<a class="anchor" aria-label="anchor" href="#arg-draws"></a></dt>
<dd><p>(positive integer) Number of draws to return after performing
pareto smooted importance sampling (PSIS). This should be smaller than
<code>single_path_draws * num_paths</code> (future versions of CmdStan will throw a
warning).</p></dd>


<dt id="arg-num-paths">num_paths<a class="anchor" aria-label="anchor" href="#arg-num-paths"></a></dt>
<dd><p>(positive integer) Number of single pathfinders to run.</p></dd>


<dt id="arg-single-path-draws">single_path_draws<a class="anchor" aria-label="anchor" href="#arg-single-path-draws"></a></dt>
<dd><p>(positive integer) Number of draws a single
pathfinder should return. The number of draws PSIS sampling samples from
will be equal to <code>single_path_draws * num_paths</code>.</p></dd>


<dt id="arg-max-lbfgs-iters">max_lbfgs_iters<a class="anchor" aria-label="anchor" href="#arg-max-lbfgs-iters"></a></dt>
<dd><p>(positive integer) The maximum number of iterations
for LBFGS.</p></dd>


<dt id="arg-num-elbo-draws">num_elbo_draws<a class="anchor" aria-label="anchor" href="#arg-num-elbo-draws"></a></dt>
<dd><p>(positive integer) Number of draws to make when
calculating the ELBO of the approximation at each iteration of LBFGS.</p></dd>


<dt id="arg-psis-resample">psis_resample<a class="anchor" aria-label="anchor" href="#arg-psis-resample"></a></dt>
<dd><p>(logical) Whether to perform pareto smoothed importance sampling.
If <code>TRUE</code>, the number of draws returned will be equal to <code>draws</code>.
If <code>FALSE</code>, the number of draws returned will be equal to <code>single_path_draws * num_paths</code>.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>(positive integer(s)) A seed for the (P)RNG to pass to CmdStan.
In the case of multi-chain sampling the single <code>seed</code> will automatically be
augmented by the the run (chain) ID so that each chain uses a different
seed. The exception is the transformed data block, which defaults to using
same seed for all chains so that the same data is generated for all chains
if RNG functions are used. The only time <code>seed</code> should be specified as a
vector (one element per chain) is if RNG functions are used in transformed
data and the goal is to generate <em>different</em> data for each chain.</p></dd>


<dt id="arg-refresh">refresh<a class="anchor" aria-label="anchor" href="#arg-refresh"></a></dt>
<dd><p>(non-negative integer) The number of iterations between
printed screen updates. If <code>refresh = 0</code>, only error messages will be
printed.</p></dd>


<dt id="arg-show-messages">show_messages<a class="anchor" aria-label="anchor" href="#arg-show-messages"></a></dt>
<dd><p>(logical) When <code>TRUE</code> (the default), prints all output
during the execution process, such as iteration numbers and elapsed times.
If the output is silenced then the <code><a href="https://mc-stan.org/cmdstanr/reference/fit-method-output.html" class="external-link">$output()</a></code> method
of the resulting fit object can be used to display the silenced messages.</p></dd>


<dt id="arg-show-exceptions">show_exceptions<a class="anchor" aria-label="anchor" href="#arg-show-exceptions"></a></dt>
<dd><p>(logical) When <code>TRUE</code> (the default), prints all
informational messages, for example rejection of the current proposal.
Disable if you wish to silence these messages, but this is not usually
recommended unless you are very confident that the model is correct up to
numerical error. If the messages are silenced then the
<code><a href="https://mc-stan.org/cmdstanr/reference/fit-method-output.html" class="external-link">$output()</a></code> method of the resulting fit object can be
used to display the silenced messages.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments to pass to <a href="https://mc-stan.org/cmdstanr/reference/cmdstanr-package.html" class="external-link">cmdstanr::cmdstanr</a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>list</code> with settings for the pathfinder sampler.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adrian Lison.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

